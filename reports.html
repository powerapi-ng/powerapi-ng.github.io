<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Reports - PowerAPI</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="quickstart.html">Quickstart</a></li><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Concepts</li><li class="chapter-item expanded "><a href="reports.html" class="active"><strong aria-hidden="true">1.</strong> Reports</a></li><li class="chapter-item expanded affix "><li class="part-title">How to guide</li><li class="chapter-item expanded "><a href="configuration.html"><strong aria-hidden="true">2.</strong> Configuration files</a></li><li class="chapter-item expanded "><a href="grafana.html"><strong aria-hidden="true">3.</strong> Visualize in grafana</a></li><li class="chapter-item expanded "><a href="cgroup.html"><strong aria-hidden="true">4.</strong> Create cgroup</a></li><li class="chapter-item expanded affix "><li class="part-title">What to use ?</li><li class="chapter-item expanded "><a href="what_to_use.html"><strong aria-hidden="true">5.</strong> What to use</a></li><li class="chapter-item expanded affix "><li class="part-title">Monitoring tools</li><li class="chapter-item expanded "><a href="rapl.html"><strong aria-hidden="true">6.</strong> RAPL</a></li><li class="chapter-item expanded "><a href="smartwatts.html"><strong aria-hidden="true">7.</strong> SmartWatts</a></li><li class="chapter-item expanded "><a href="jouleit.html"><strong aria-hidden="true">8.</strong> Jouleit</a></li><li class="chapter-item expanded "><a href="virtualwatts.html"><strong aria-hidden="true">9.</strong> VirtualWatts</a></li><li class="chapter-item expanded affix "><li class="part-title">Sensors</li><li class="chapter-item expanded "><a href="hwpc-sensor.html"><strong aria-hidden="true">10.</strong> Hwpc-Sensor</a></li><li class="chapter-item expanded "><a href="procfs-sensor.html"><strong aria-hidden="true">11.</strong> Procfs-Sensor</a></li><li class="chapter-item expanded affix "><li class="part-title">Database</li><li class="chapter-item expanded "><a href="database.html"><strong aria-hidden="true">12.</strong> Database</a></li><li class="chapter-item expanded affix "><li class="part-title">PowerAPI</li><li class="chapter-item expanded "><a href="powerapi.html"><strong aria-hidden="true">13.</strong> PowerAPI</a></li><li class="chapter-item expanded affix "><li class="part-title">FAQ</li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">PowerAPI</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="reports"><a class="header" href="#reports">Reports</a></h1>
<p>PowerAPI tools tend to be modular, any sensor could be plugged to any monitoring
tool as long as the needed information is provided.
We fixed the way of encoding the information. Those encoding are called reports.</p>
<p>A report specify the <code>json</code> fields that should be provided to pass information of
a certain kind.</p>
<p>The type of reports required by each formula are specified in their user guide.</p>
<p>All report have a common basis:</p>
<ul>
<li>
<p><code>timestamp</code> : at the format &quot;year-month-dayThour:minutes:secondes&quot;. The
timestamp should reflect the time at which the information correspond, not the
time the information was computed.
For example if a power consumption of a CPU is mesured at time <code>t</code> and used to
determine the power comsumption of a cgroup in a <code>PowerReport</code>, this report
should have timestamp <code>t</code>.</p>
<ul>
<li><code>target</code> : The target should be the subject of the mesure. For example if
you produce a report that contain information relative to a program,domain,
etc. The target should refer to it.</li>
</ul>
</li>
<li>
<p><code>sensor</code>: It's a name field that should be use to regroup reports for
computing modules. For example, in VirtualWatts, the computationnal module need to receive a
<code>ProcfsReport</code> and a <code>PowerReport</code>, for both reports to be send to the same
computational module they have to have the same <code>sensor</code>.</p>
<p>A report have the following format:</p>
<pre><code class="language-json">&quot;timestamp&quot;:$timestamp,
&quot;target&quot;:$target,
&quot;sensor&quot;:$sensor,
$report_specific_fields

</code></pre>
</li>
</ul>
<p>In the following parts we specify the <code>$report_specific_fields</code> for each type of report.</p>
<h1 id="hwpc-report"><a class="header" href="#hwpc-report">HWPC Report</a></h1>
<p>A <code>HWPCReport</code> should be used to report perfomance counters and RAPL.
It specific fields are the following :</p>
<ul>
<li>
<p><code>groups</code>: A list of subreport that can be of three kind, <code>rapl</code>, <code>core</code> and
<code>msr</code>.</p>
<p>Each are presented the same way</p>
<pre><code class="language-json">{
  $type: {
    $core_number : {
      $socket_number : {
        List of counter and their value
      }
    }
  }
}
</code></pre>
</li>
</ul>
<p>We provide an example of <code>HWPCReport</code>:</p>
<pre><code class="language-json">{
  &quot;timestamp&quot;: &quot;2021-01-13T09:51:22.630&quot;,
  &quot;sensor&quot;: &quot;sensor_test&quot;,
  &quot;target&quot;: &quot;influxdb&quot;,
  &quot;groups&quot;: {
    &quot;core&quot;: {
      &quot;0&quot;: {
        &quot;0&quot;: {
          &quot;CPU_CLK_THREAD_UNHALTED:THREAD_P&quot;: 75510,
          &quot;CPU_CLK_THREAD_UNHALTED:REF_P&quot;: 2271,
          &quot;time_enabled&quot;: 167403,
          &quot;time_running&quot;: 167403,
          &quot;LLC_MISSES&quot;: 1077,
          &quot;INSTRUCTIONS_RETIRED&quot;: 31693
        },
        &quot;1&quot;: {
          &quot;CPU_CLK_THREAD_UNHALTED:THREAD_P&quot;: 43801,
          &quot;CPU_CLK_THREAD_UNHALTED:REF_P&quot;: 1318,
          &quot;time_enabled&quot;: 99324,
          &quot;time_running&quot;: 99324,
          &quot;LLC_MISSES&quot;: 750,
          &quot;INSTRUCTIONS_RETIRED&quot;: 15011
        }
      }
    }
  }
}
{
  &quot;timestamp&quot; : &quot;2021-01-13T09:51:22.630&quot;,
  &quot;sensor&quot; : &quot;sensor_test&quot;,
  &quot;target&quot; : &quot;all&quot;,
  &quot;groups&quot; : {
    &quot;rapl&quot; : {
      &quot;0&quot; : {
        &quot;1&quot; : {
			      &quot;RAPL_ENERGY_PKG&quot; : 5709496320,
			      &quot;time_enabled&quot; : 1006717449,
			      &quot;time_running&quot; : 1006717449
          }
      }
    },
    &quot;msr&quot; : {
      &quot;0&quot; : {
        &quot;0&quot; : {
          &quot;MPERF&quot; : 29646849,
	        &quot;APERF&quot; : 12319312,
	        &quot;TSC&quot; : 2122153094,
	        &quot;time_enabled&quot; : 1006580601,
	        &quot;time_running&quot; : 1006580601
        },
        &quot;1&quot; : {
          &quot;MPERF&quot; : 20587012,
          &quot;APERF&quot; : 19838920,
          &quot;TSC&quot; : 2122185970,
	        &quot;time_enabled&quot; : 1006560540,
	        &quot;time_running&quot; : 1006560540
        }
      }
    }
  }
}

</code></pre>
<h1 id="power-report"><a class="header" href="#power-report">Power Report</a></h1>
<p>A <code>PowerReport</code> should be used to transfer information about power consumption.
It specific fields are the following :</p>
<ul>
<li><code>power</code>: A power value in Watts</li>
</ul>
<p>We provide an example of <code>PowerReport</code>:</p>
<pre><code class="language-json">{
  &quot;timestamp&quot;: &quot;2021-09-14T12:37:37.168817&quot;,
  &quot;sensor&quot;: &quot;formula_group&quot;,
  &quot;target&quot;: &quot;all&quot;,
  &quot;power&quot;: 42
}
</code></pre>
<h1 id="procfs-report"><a class="header" href="#procfs-report">Procfs Report</a></h1>
<p>A <code>ProcfsReport</code> should be used to transfer information about cpu usage of
process.
It specific fields are the following :</p>
<ul>
<li><code>global_cpu_usage</code> : The used percentage of the cpu.</li>
<li><code>usage</code>: A list of the monitored process with their percentage of cpu usage.</li>
</ul>
<p>We provide an example of <code>ProcfsReport</code>:</p>
<pre><code class="language-json">{
  &quot;timestamp&quot;: &quot;2021-09-14T12:37:37.168817&quot;,
  &quot;sensor&quot;: &quot;formula_group&quot;,
  &quot;target&quot;: [&quot;firefox_cgroup&quot;, &quot;emacs_cgroup&quot;, &quot;zsh_cgroup&quot;, &quot;mongo_cgroup&quot;],
  &quot;usage&quot;: {
    &quot;firefox_cgroup&quot;: 8.36,
    &quot;emacs_cgroup&quot;: 5.52,
    &quot;zsh_cgroup&quot;: 0.01,
    &quot;mongo_cgroup&quot;: 0.64
  },
  &quot;global_cpu_usage&quot;: 27.610000000000014
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="introduction.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="configuration.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="introduction.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="configuration.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
